FROM python:3.11-slim

WORKDIR /app

COPY requirements.txt ./
RUN pip install --no-cache-dir -r requirements.txt

COPY . .

# Railway asignar치 el puerto din치micamente
# Usar exec form con /bin/sh -c para expandir correctamente PORT
ENV PORT=8000
EXPOSE 8000

# Soluci칩n recomendada por Railway: usar /bin/sh -c con exec form
# Esto garantiza que la variable PORT se expanda correctamente en tiempo de ejecuci칩n
CMD ["/bin/sh", "-c", "exec uvicorn main:app --host 0.0.0.0 --port ${PORT:-8000}"]

